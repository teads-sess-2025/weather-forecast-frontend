<div>
  <label for="location">Enter location:</label>
  <input
    id="location"
    type="text"
    [(ngModel)]="location"
    placeholder="e.g. Ljubljana"
    class="border border-gray-400 px-3 py-2 rounded"
  />
  <button
    (click)="submitLocation()"
    class="px-3 py-2 rounded bg-blue-500 text-white"
  >
    Search
  </button>
</div>

@if (data) {
  <div class="flex flex-row gap-10">
    <div>
      <h2 class="text-xl font-semibold mb-4">
        Weather Forecast for {{ data.city.name }}
      </h2>

      @for (day of data.forecast; track day.date) {
        <div class="mb-8">
          <h3 class="text-lg font-bold mb-5">{{ formatDate(day.date) }}</h3>

          <table class="table-auto border-separate border-spacing-0">
            <thead>
            <tr>
              <th class="px-4 py-2 border-r border-gray-300 text-left"></th>
              <th class="px-4 py-2 border-r border-gray-300 text-left">
                Min Temp (Â°C)
              </th>
              <th class="px-4 py-2 border-r border-gray-300 text-left">
                Max Temp (Â°C)
              </th>
              <th class="px-4 py-2 border-r border-gray-300 text-left">
                Wind (km/h)
              </th>
              <th class="px-4 py-2 border-r border-gray-300 text-left">
                Precip. (mm)
              </th>
              <th class="px-4 py-2 border-r border-gray-300 text-left">Rain %</th>
              <th class="px-4 py-2 text-left">Humidity</th>
            </tr>
            </thead>
            <tbody>
              @for (forecast of day.forecast; track forecast.provider) {
                <tr>
                  <td class="px-4 py-2 border-r border-gray-200">
                    {{ forecast.provider }}
                  </td>
                  <td class="px-4 py-2 border-r border-gray-200">
                    {{ forecast.minTemp }}
                  </td>
                  <td class="px-4 py-2 border-r border-gray-200">
                    {{ forecast.maxTemp }}
                  </td>
                  <td class="px-4 py-2 border-r border-gray-200">
                    {{ forecast.windSpeed }}
                  </td>
                  <td class="px-4 py-2 border-r border-gray-200">
                    {{ forecast.totalPrecipitationMm }}
                  </td>
                  <td class="px-4 py-2 border-r border-gray-200">
                    {{ forecast.chanceOfRain }}
                  </td>
                  <td class="px-4 py-2">{{ forecast.humidity }}</td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      }
    </div>
    <div class="flex flex-col border border-gray-300 rounded-xl px-4 py-3 w-1/3">
      <p class="text-xl font-semibold">ðŸ§ AI advice</p>
      <div class="border-t border-gray-300 my-4"></div>
      <markdown
        [data]="data.openAiAdvice">
      </markdown>
<!--      <p>{{data.openAiAdvice}}</p>-->
    </div>
  </div>
}
